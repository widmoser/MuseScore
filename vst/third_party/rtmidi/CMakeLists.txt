cmake_minimum_required (VERSION 3.3)
project (RtMidi)

if (${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    include_directories(/Developer/Headers/FlatCarbon)
    find_library(CORE_MIDI_LIBRARY CoreMidi)
    mark_as_advanced(CORE_MIDI_LIBRARY)
    find_library(CORE_AUDIO CoreAudio)
    mark_as_advanced(CORE_AUDIO)
    find_library(CORE_FOUNDATION CoreFoundation)
    mark_as_advanced(CORE_FOUNDATION)
    set(PLATFORM_LIBS ${CORE_MIDI_LIBRARY} ${CORE_AUDIO} ${CORE_FOUNDATION})
elseif (${CMAKE_SYSTEM_NAME} MATCHES "Windows")
    set(PLATFORM_LIBS winmm)
endif()

add_library(rtmidi RtMidi.cpp)
target_link_libraries(rtmidi PUBLIC ${PLATFORM_LIBS})
if (${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    target_compile_definitions(rtmidi PRIVATE __MACOSX_CORE__)
elseif (${CMAKE_SYSTEM_NAME} MATCHES "Windows")
    target_compile_definitions(rtmidi PRIVATE __WINDOWS_MM__)
endif()